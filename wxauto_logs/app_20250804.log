2025-08-04 21:56:42 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 21:57:10 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 21:57:22 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 21:58:04 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 21:58:10 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 21:58:56 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:00:07 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:00:44 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:01:10 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:02:18 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:02:31 [wxauto] [DEBUG] [sessionbox.py:68]  切换聊天窗口: 文件传输助手, False, False, 0.5
2025-08-04 22:02:32 [wxauto] [DEBUG] [main.py:192]  文件传输助手 切换到聊天窗口: 文件传输助手
2025-08-04 22:02:32 [wxauto] [DEBUG] [sessionbox.py:152]  打开独立窗口: 文件传输助手
2025-08-04 22:02:32 [wxauto] [DEBUG] [sessionbox.py:156]  找到会话: 文件传输助手
2025-08-04 22:03:32 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:03:32 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:05:10 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:05:11 [wxauto] [DEBUG] [sessionbox.py:68]  切换聊天窗口: 文件传输助手, False, False, 0.5
2025-08-04 22:05:11 [wxauto] [DEBUG] [main.py:192]  文件传输助手 切换到聊天窗口: 文件传输助手
2025-08-04 22:05:11 [wxauto] [DEBUG] [sessionbox.py:152]  打开独立窗口: 文件传输助手
2025-08-04 22:05:11 [wxauto] [DEBUG] [sessionbox.py:156]  找到会话: 文件传输助手
2025-08-04 22:05:25 [wxauto] [DEBUG] [msg.py:79]  content: 你好, length: 8
2025-08-04 22:05:25 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好
2025-08-04 22:05:28 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 19, in _on_message_
    user_id = chatinfo.chat_name
AttributeError: 'dict' object has no attribute 'chat_name'

2025-08-04 22:06:01 [wxauto] [DEBUG] [wx.py:215]  窗口 文件传输助手 已关闭，移除监听
2025-08-04 22:07:08 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:07:10 [wxauto] [DEBUG] [sessionbox.py:68]  切换聊天窗口: 文件传输助手, False, False, 0.5
2025-08-04 22:07:10 [wxauto] [DEBUG] [main.py:192]  文件传输助手 切换到聊天窗口: 文件传输助手
2025-08-04 22:07:10 [wxauto] [DEBUG] [sessionbox.py:152]  打开独立窗口: 文件传输助手
2025-08-04 22:07:10 [wxauto] [DEBUG] [sessionbox.py:156]  找到会话: 文件传输助手
2025-08-04 22:07:31 [wxauto] [DEBUG] [msg.py:79]  content: 56789, length: 8
2025-08-04 22:07:31 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 56789
2025-08-04 22:07:34 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 19, in _on_message_
    user_id = chatinfo.chat_name
AttributeError: 'dict' object has no attribute 'chat_name'

2025-08-04 22:08:53 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:08:54 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:09:38 [wxauto] [DEBUG] [msg.py:79]  content: 哈喽, length: 8
2025-08-04 22:09:38 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 哈喽
2025-08-04 22:10:02 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 19, in _on_message_
    user_id = chatinfo.chat_name
AttributeError: 'dict' object has no attribute 'chat_name'

2025-08-04 22:11:20 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:11:50 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:12:37 [wxauto] [DEBUG] [msg.py:79]  content: 你好啊我的助手, length: 8
2025-08-04 22:12:37 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好啊我的助手
2025-08-04 22:28:03 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:28:04 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:28:25 [wxauto] [DEBUG] [msg.py:79]  content: 你好啊123456, length: 8
2025-08-04 22:28:25 [wxauto] [DEBUG] [wx.py:223]  [time base]获取到新消息：文件传输助手 - 22:28
2025-08-04 22:29:11 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 68, in _on_message_
    WechatClient.handler({
AttributeError: type object 'WechatClient' has no attribute 'handler'

2025-08-04 22:29:11 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好啊123456
2025-08-04 22:30:47 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:30:48 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:30:59 [wxauto] [DEBUG] [msg.py:79]  content: 123456789, length: 8
2025-08-04 22:30:59 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 123456789
2025-08-04 22:31:12 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:31:13 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:31:24 [wxauto] [DEBUG] [msg.py:79]  content: 123123, length: 8
2025-08-04 22:31:24 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 123123
2025-08-04 22:36:43 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:36:44 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:37:03 [wxauto] [DEBUG] [msg.py:79]  content: fuck, length: 8
2025-08-04 22:37:03 [wxauto] [DEBUG] [wx.py:223]  [time base]获取到新消息：文件传输助手 - 22:37
2025-08-04 22:38:39 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 38, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message.user_id, message.message)
AttributeError: 'dict' object has no attribute 'user_id'

2025-08-04 22:38:39 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - fuck
2025-08-04 22:39:03 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 38, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message.user_id, message.message)
AttributeError: 'dict' object has no attribute 'user_id'

2025-08-04 22:39:46 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:39:47 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:39:59 [wxauto] [DEBUG] [msg.py:79]  content: ohhhhh, length: 8
2025-08-04 22:39:59 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - ohhhhh
2025-08-04 22:40:21 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 38, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message.user_id, message.message)
AttributeError: 'dict' object has no attribute 'user_id'

2025-08-04 22:41:03 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:41:04 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:41:13 [wxauto] [DEBUG] [msg.py:79]  content: 1234567890, length: 8
2025-08-04 22:41:13 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 1234567890
2025-08-04 22:41:30 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 38, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message.user_id, message.message)
AttributeError: 'dict' object has no attribute 'user_id'

2025-08-04 22:42:23 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:45:47 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:45:48 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:46:00 [wxauto] [DEBUG] [msg.py:79]  content: 哟哟, length: 8
2025-08-04 22:46:00 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 哟哟
2025-08-04 22:46:49 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:46:50 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:46:57 [wxauto] [DEBUG] [msg.py:79]  content: 哟哟, length: 8
2025-08-04 22:46:57 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 哟哟
2025-08-04 22:48:07 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:48:08 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:48:14 [wxauto] [DEBUG] [msg.py:79]  content: 我靠, length: 8
2025-08-04 22:48:14 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 我靠
2025-08-04 22:49:02 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 38, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 22:49:27 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-24a43027-02c2-4504-977e-5b5c35b8f92f', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': '我靠'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 22:49:27 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 22:49:27 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 22:49:27 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000029DFFE87820>
2025-08-04 22:49:27 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x0000029DFF8369C0> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 22:49:27 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000029DFFE87670>
2025-08-04 22:49:27 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 22:49:27 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 22:49:27 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 22:49:27 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 22:49:27 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 22:49:28 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 14:49:27 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'363'), (b'Connection', b'keep-alive')])
2025-08-04 22:49:28 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 22:49:28 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 22:49:28 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 22:49:28 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 22:49:28 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 22:49:28 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 14:49:27 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '363', 'connection': 'keep-alive'})
2025-08-04 22:49:28 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 22:52:05 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:52:05 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:52:12 [wxauto] [DEBUG] [msg.py:79]  content: 你好啊, length: 8
2025-08-04 22:52:12 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好啊
2025-08-04 22:52:13 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 38, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 22:52:23 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-35c7d24f-1f64-4dad-a5b6-fed971f9f625', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': '你好啊'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 22:52:23 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 22:52:23 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 22:52:23 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000259673C9F60>
2025-08-04 22:52:23 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x0000025966CAE8C0> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 22:52:23 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000259673C9DB0>
2025-08-04 22:52:23 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 22:52:23 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 22:52:23 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 22:52:23 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 22:52:23 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 22:52:24 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 14:52:23 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'360'), (b'Connection', b'keep-alive')])
2025-08-04 22:52:24 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 22:52:24 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 22:52:24 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 22:52:24 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 22:52:24 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 22:52:24 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 14:52:23 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '360', 'connection': 'keep-alive'})
2025-08-04 22:52:24 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 22:56:39 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 22:56:40 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 22:56:49 [wxauto] [DEBUG] [msg.py:79]  content: 你好么？, length: 8
2025-08-04 22:56:49 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好么？
2025-08-04 22:56:49 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 38, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 22:56:51 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-bf0abb64-9c98-471e-bed7-430ebc8b2ddd', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': '你好么？'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 22:56:51 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 22:56:51 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 22:56:51 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025A71B0E560>
2025-08-04 22:56:51 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x0000025A714C67C0> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 22:56:51 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025A71B0E3B0>
2025-08-04 22:56:51 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 22:56:51 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 22:56:51 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 22:56:51 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 22:56:51 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 22:56:52 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 14:56:52 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive')])
2025-08-04 22:56:52 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 22:56:52 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 22:56:52 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 22:56:52 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 22:56:52 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 22:56:52 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 14:56:52 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '391', 'connection': 'keep-alive'})
2025-08-04 22:56:52 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 22:57:23 [wxauto] [DEBUG] [msg.py:79]  content: 你好不好, length: 8
2025-08-04 22:57:23 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好不好
2025-08-04 22:57:23 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 38, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 22:57:25 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-d1cbe089-5971-45aa-a479-faf7bc909ccc', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': '你好么？'}, {'role': 'assistant', 'content': '你好！我很好，谢谢！你呢？有什么我可以帮你的吗？'}, {'role': 'user', 'content': '你好不好'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 22:57:25 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 22:57:25 [httpcore.connection] [DEBUG] [_trace.py:47]  close.started
2025-08-04 22:57:25 [httpcore.connection] [DEBUG] [_trace.py:47]  close.complete
2025-08-04 22:57:25 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 22:57:25 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025A71B805E0>
2025-08-04 22:57:25 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x0000025A714C67C0> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 22:57:25 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025A71B80130>
2025-08-04 22:57:25 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 22:57:25 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 22:57:25 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 22:57:25 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 22:57:25 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 22:57:26 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 14:57:26 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'381'), (b'Connection', b'keep-alive')])
2025-08-04 22:57:26 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 22:57:26 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 22:57:26 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 22:57:26 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 22:57:26 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 22:57:26 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 14:57:26 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '381', 'connection': 'keep-alive'})
2025-08-04 22:57:26 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 23:00:37 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 23:00:37 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 23:00:47 [wxauto] [DEBUG] [msg.py:79]  content: 你好呀, length: 8
2025-08-04 23:00:47 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好呀
2025-08-04 23:00:47 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:00:49 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-849f68a8-cf3e-431b-9187-915d094d329a', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': '你好呀'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 23:00:49 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 23:00:49 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 23:00:49 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000013FA9640D00>
2025-08-04 23:00:49 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x0000013FA915E8C0> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 23:00:49 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000013FA96126E0>
2025-08-04 23:00:49 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 23:00:49 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 23:00:49 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 23:00:49 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 23:00:49 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 23:00:50 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 15:00:50 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'360'), (b'Connection', b'keep-alive')])
2025-08-04 23:00:50 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 23:00:50 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 23:00:50 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 23:00:50 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 23:00:50 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 23:00:50 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 15:00:50 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '360', 'connection': 'keep-alive'})
2025-08-04 23:00:50 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 23:01:33 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 23:01:34 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 23:01:49 [wxauto] [DEBUG] [msg.py:79]  content: 你好啊, length: 8
2025-08-04 23:01:49 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好啊
2025-08-04 23:01:49 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "c:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 29, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:01:51 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-6568e538-1a39-4c06-a3f8-48035222a196', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': '你好啊'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 23:01:51 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 23:01:51 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 23:01:51 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000015E05122500>
2025-08-04 23:01:51 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x0000015E04AD67C0> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 23:01:51 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000015E05122350>
2025-08-04 23:01:51 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 23:01:51 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 23:01:51 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 23:01:51 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 23:01:51 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 23:01:52 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 15:01:51 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'360'), (b'Connection', b'keep-alive')])
2025-08-04 23:01:52 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 23:01:52 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 23:01:52 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 23:01:52 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 23:01:52 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 23:01:52 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 15:01:51 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '360', 'connection': 'keep-alive'})
2025-08-04 23:01:52 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 23:02:30 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 23:02:31 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 23:02:38 [wxauto] [DEBUG] [msg.py:79]  content: Hello，你好, length: 8
2025-08-04 23:02:38 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - Hello，你好
2025-08-04 23:02:38 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 30, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:02:40 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-59b2e18d-1638-47ca-8b31-14d1f94a9ae3', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': 'Hello，你好'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 23:02:40 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 23:02:40 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 23:02:40 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022F67836440>
2025-08-04 23:02:40 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x0000022F67132940> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 23:02:40 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022F676038B0>
2025-08-04 23:02:40 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 23:02:40 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 23:02:40 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 23:02:40 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 23:02:40 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 23:02:41 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 15:02:41 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'363'), (b'Connection', b'keep-alive')])
2025-08-04 23:02:41 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 23:02:41 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 23:02:41 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 23:02:41 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 23:02:41 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 23:02:41 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 15:02:41 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '363', 'connection': 'keep-alive'})
2025-08-04 23:02:41 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 23:03:25 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 23:03:25 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 23:03:32 [wxauto] [DEBUG] [msg.py:79]  content: Hello，你好, length: 8
2025-08-04 23:03:32 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - Hello，你好
2025-08-04 23:03:33 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 30, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:03:35 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-70a06b5d-eb2b-4f2f-b66d-bd37b6fdd341', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': 'Hello，你好'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 23:03:35 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 23:03:35 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 23:03:35 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001A3A7F50AC0>
2025-08-04 23:03:35 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A3A7A52940> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 23:03:35 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001A3A7F81390>
2025-08-04 23:03:35 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 23:03:35 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 23:03:35 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 23:03:35 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 23:03:35 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 23:03:36 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 15:03:35 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'360'), (b'Connection', b'keep-alive')])
2025-08-04 23:03:36 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 23:03:36 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 23:03:36 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 23:03:36 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 23:03:36 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 23:03:36 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 15:03:35 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '360', 'connection': 'keep-alive'})
2025-08-04 23:03:36 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 23:04:20 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 23:04:21 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 23:04:30 [wxauto] [DEBUG] [msg.py:79]  content: 哈喽！, length: 8
2025-08-04 23:04:30 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 哈喽！
2025-08-04 23:04:31 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 30, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:04:33 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-36df2f25-a381-426d-8846-1b552db49f63', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': '哈喽！'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 23:04:33 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 23:04:33 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 23:04:33 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025CAECDA380>
2025-08-04 23:04:33 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x0000025CAE5D2940> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 23:04:33 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025CAEAA36D0>
2025-08-04 23:04:33 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 23:04:33 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 23:04:33 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 23:04:33 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 23:04:33 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 23:04:34 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 15:04:33 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'360'), (b'Connection', b'keep-alive')])
2025-08-04 23:04:34 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 23:04:34 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 23:04:34 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 23:04:34 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 23:04:34 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 23:04:34 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 15:04:33 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '360', 'connection': 'keep-alive'})
2025-08-04 23:04:34 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 23:10:47 [wxauto] [DEBUG] [wx.py:31]  开始监听
2025-08-04 23:10:47 [wxauto] [DEBUG] [main.py:188]  文件传输助手 获取到已存在的子窗口: <wxauto - WeChatSubWnd object("文件传输助手")>
2025-08-04 23:10:58 [wxauto] [DEBUG] [msg.py:79]  content: 你好！, length: 8
2025-08-04 23:10:58 [wxauto] [DEBUG] [wx.py:223]  [time base]获取到新消息：文件传输助手 - 23:10
2025-08-04 23:10:58 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 30, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:10:58 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - 你好！
2025-08-04 23:10:58 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 30, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:11:01 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-27064791-01be-4b6d-bc5b-58cfade421de', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': 'Here is a complex message. You cannot understand it.你好！'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 23:11:01 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 23:11:01 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.started host='api.siliconflow.cn' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-04 23:11:01 [httpcore.connection] [DEBUG] [_trace.py:47]  connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002C3F64EA1D0>
2025-08-04 23:11:01 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.started ssl_context=<ssl.SSLContext object at 0x000002C3F5DE2940> server_hostname='api.siliconflow.cn' timeout=5.0
2025-08-04 23:11:01 [httpcore.connection] [DEBUG] [_trace.py:47]  start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002C3F64EA020>
2025-08-04 23:11:01 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 23:11:01 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 23:11:01 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 23:11:01 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 23:11:01 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 23:11:02 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 15:11:01 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'352'), (b'Connection', b'keep-alive')])
2025-08-04 23:11:02 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 23:11:02 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 23:11:02 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 23:11:02 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 23:11:02 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 23:11:02 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 15:11:01 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '352', 'connection': 'keep-alive'})
2025-08-04 23:11:02 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 23:11:04 [wxauto] [DEBUG] [msg.py:79]  content: Hello! How can I assist you today?, length: 8
2025-08-04 23:11:04 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - Hello! How can I assist you today?
2025-08-04 23:11:04 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 30, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:11:06 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-f991e6e5-eb04-495a-8bf3-98998254d3f5', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': 'Here is a complex message. You cannot understand it.你好！'}, {'role': 'assistant', 'content': 'Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello! How can I assist you today?'}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 23:11:06 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 15:11:06 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'396'), (b'Connection', b'keep-alive')])
2025-08-04 23:11:06 [httpx] [INFO] [_client.py:1025]  HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.started request=<Request [b'POST']>
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_body.complete
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.started
2025-08-04 23:11:06 [httpcore.http11] [DEBUG] [_trace.py:47]  response_closed.complete
2025-08-04 23:11:06 [openai._base_client] [DEBUG] [_base_client.py:1013]  HTTP Response: POST https://api.siliconflow.cn/v1/chat/completions "200 OK" Headers({'date': 'Mon, 04 Aug 2025 15:11:06 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '396', 'connection': 'keep-alive'})
2025-08-04 23:11:06 [openai._base_client] [DEBUG] [_base_client.py:1021]  request_id: None
2025-08-04 23:11:07 [wxauto] [DEBUG] [msg.py:79]  content: I'm here to help! Could you please let me know what you need assistance with?, length: 8
2025-08-04 23:11:07 [wxauto] [DEBUG] [wx.py:223]  [self text]获取到新消息：文件传输助手 - I'm here to help! Could you please let me know what you need assistance with?
2025-08-04 23:11:07 [wxauto] [DEBUG] [wx.py:54]  监听消息回调发生错误：Traceback (most recent call last):
  File "C:\Users\18317\anaconda3\envs\ai\lib\site-packages\wxauto\wx.py", line 52, in _safe_callback
    callback(msg, chat)
  File "D:\Desktop\AI-wechat\wechat_client.py", line 37, in _on_message_
    self.handler({
  File "D:\Desktop\AI-wechat\wechat_bot.py", line 30, in _message_handler
    self.debounce_pool.submit_message(message["user_id"], message["message"])
  File "D:\Desktop\AI-wechat\LLM\debounce_pool.py", line 33, in submit_message
    enable_request = self._user_queues[user_id].qsize() >= self.config.debounce_threshold
TypeError: '>=' not supported between instances of 'int' and 'str'

2025-08-04 23:11:09 [openai._base_client] [DEBUG] [_base_client.py:482]  Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-238791c7-4f2a-4372-af92-b94db7d43558', 'json_data': {'messages': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': 'Here is a complex message. You cannot understand it.你好！'}, {'role': 'assistant', 'content': 'Hello! How can I assist you today?'}, {'role': 'user', 'content': 'Hello! How can I assist you today?'}, {'role': 'assistant', 'content': "I'm here to help! Could you please let me know what you need assistance with?"}, {'role': 'user', 'content': "I'm here to help! Could you please let me know what you need assistance with?"}], 'model': 'Qwen/Qwen3-30B-A3B-Instruct-2507', 'stream': False, 'temperature': 1.0, 'tools': [{'type': 'function', 'function': {'name': 'list_files_in_directory', 'description': 'List all files you can send to user, return a list of file names, and maybe a file description. Then you can choose which file to send.', 'parameters': {'type': 'object', 'properties': {}, 'required': []}}}, {'type': 'function', 'function': {'name': 'send_a_file', 'description': 'Send a file to user. You must get file name from list_files_in_directory function first.', 'parameters': {'type': 'object', 'properties': {'file_name': {'type': 'string', 'description': 'File name, you must get file name from list_files_in_directory function.'}}, 'required': ['file_name']}}}, {'type': 'function', 'function': {'name': 'add', 'description': 'Calculate the sum of two numbers.', 'parameters': {'type': 'object', 'properties': {'a': {'type': 'int', 'description': 'the first number to add'}, 'b': {'type': 'int', 'description': 'the second number to add'}}, 'required': []}}}], 'top_p': 0.95}}
2025-08-04 23:11:09 [openai._base_client] [DEBUG] [_base_client.py:975]  Sending HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions
2025-08-04 23:11:09 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.started request=<Request [b'POST']>
2025-08-04 23:11:09 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_headers.complete
2025-08-04 23:11:09 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.started request=<Request [b'POST']>
2025-08-04 23:11:09 [httpcore.http11] [DEBUG] [_trace.py:47]  send_request_body.complete
2025-08-04 23:11:09 [httpcore.http11] [DEBUG] [_trace.py:47]  receive_response_headers.started request=<Request [b'POST']>
